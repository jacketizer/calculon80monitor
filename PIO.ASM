; ******************************************************************************
; PARALLEL IO PORT DRIVER
; ******************************************************************************
; Driver: Functions to read and write to the GPIO ports
; ------------------------------------------------------------------------------

; Addresses
; ------------------------------------------------------------------------------
PIO_BASE_OUT	EQU	0x0C
PIO_BASE_IN	EQU	0x0E

; ------------------------------------------------------------------------------
; Title:      Write a byte to an output port
; Name:       PIO_WRITE
;
; Entry:      C = Port Index, B = Value
; Exit:       [No value]
; Registers:  A,B,C
; ------------------------------------------------------------------------------
PIO_WRITE:
	LD	A,PIO_BASE_OUT
	ADD	A,C
	LD	C,A
	OUT	(C),B
	RET
; ------------------------------------------------------------------------------

; ------------------------------------------------------------------------------
; Title:      Read a byte from an input port
; Name:       PIO_READ
;
; Entry:      C = Port Index
; Exit:       A = Port Value
; Registers:  A,C
; ------------------------------------------------------------------------------
PIO_READ:
	LD	A,PIO_BASE_IN
	ADD	A,C
	LD	C,A
	IN	A,(C)
	RET
; ------------------------------------------------------------------------------

; ------------------------------------------------------------------------------
; END: Driver
; ------------------------------------------------------------------------------
